<mat-card>
  <mat-card-header>
    <mat-card-title>{{ map.name }}</mat-card-title>
    <app-timer></app-timer>
  </mat-card-header>
  <mat-card-content>
    <p>{{ map.description }}</p>
    <div class="grid-container">
      <div *ngFor="let row of map?.grid" class="grid-row">
        <div *ngFor="let tile of row" class="grid-tile" [class.passable]="tile.passable" [class.blocked]="!tile.passable">
          <!-- Optionally display coordinates -->
          {{ tile.x }},{{ tile.y }}
          <!-- Insert player marker if this tile matches the player's position -->
          <ng-container *ngIf="tile.x === player.position.x && tile.y === player.position.y">
            <div class="player-marker">
              <img *ngIf="player.avatarUrl; else defaultIcon" [src]="player.avatarUrl" alt="avatar" />
              <ng-template #defaultIcon>
                <mat-icon>person</mat-icon>
              </ng-template>
            </div>
          </ng-container>
        </div>
      </div>
    </div>
  </mat-card-content>
</mat-card>
